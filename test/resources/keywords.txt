*** Settings ***
Documentation     This is high level keywords that will be used by local test cases
Resource          messages.txt
Resource          context.txt
Library           com.automic.robot.itpa.ItpaLibrary

*** Key Words ***
Init Action
    [Arguments]    ${actionName}
    Action Create    ${actionName}
    Action Set    ${PRT_AGENT}    ${_AGENT}
    Action Set    ${PRT_LOGIN}    ${_LOGIN}

Action Report Should Contain
    [Arguments]    ${text}
    ${report} =    Action Get Report
    Should Contain    ${report}    ${text}

Action Report Should Be Found
    ${report} =    Action Get Report
    Should Not Be Empty    ${report}

Action Report Should Not Be Found
    ${report} =    Action Get Report
    Should Be Empty    ${report}

Action Return Code Should Be
    [Arguments]    ${code}
    ${returnCode}=    Action Get Variable    Return code
    Should Be Equal    ${returnCode}    ${code}

Action Return Code Should Not Equal
    [Arguments]    ${code}
    ${returnCode}=    Action Get Variable    Return code
    Should Not Be Equal    ${returnCode}    ${code}

Action Return Status Should Be
    [Arguments]    ${status}
    ${returnStatus}=    Action Get Variable    Status
    Should Be Equal    ${returnStatus}    ${status}

Action Return Status Should Not Be
    [Arguments]    ${status}
    ${returnStatus}=    Action Get Variable    Status
    Should Not Be Equal    ${returnStatus}    ${status}

Action Return Variable Should Be
    [Arguments]    ${variableValue}
    ${out}=    Action Get Variable    ${variableName}
    Should Be Equal    ${out}    ${variableValue}

Action Return Variable Should Be Equal As Integers
    [Arguments]    ${variableValue}
    ${out}=    Action Get Variable    ${variableName}
    Should Be Equal As Integers    ${out}    ${variableValue}

Make View
    [Arguments]    ${cleartool_path}    ${view_tag}    ${view_path}    ${view_type}
    Init Action    ${ACTION_MAKE_VIEW}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${cleartool_path}
    Action Set    ${PRT_MAKE_VIEW_VIEW_TAG}    ${view_tag}
    Action Set    ${PRT_MAKE_VIEW_VIEW_PATH}    ${view_path}
    Action Set    ${PRT_MAKE_VIEW_VIEW_TYPE}    ${view_type}
    Action Execute

Remove View
    [Arguments]    ${cleartool_path}    ${view_tag}    ${view_path}    ${view_type}
    Init Action    ${ACTION_REMOVE_VIEW}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${cleartool_path}
    Action Set    ${PRT_REMOVE_VIEW_VIEW_TAG}    ${view_tag}
    Action Set    ${PRT_REMOVE_VIEW_VIEW_PATH}    ${view_path}
    Action Set    ${PRT_REMOVE_VIEW_VIEW_TYPE}    ${view_type}
    Action Execute

Make a branch type
    [Arguments]    ${branch_type}    ${vob_tag}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    mkbrtype -nc ${branch_type}\@${vob_tag}
    Action Execute
    Action Report Should Be Found

Uncheckout elements
    [Arguments]    ${elements}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    uncheckout -rm ${elements}
    Action Execute
    Action Report Should Be Found

Remove a branch type
    [Arguments]    ${branch_type}    ${vob_tag}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    rmtype -rmall -force brtype:${branch_type}\@${vob_tag}
    Action Execute
    Action Report Should Be Found

Uncheckout and remove branch type
    [Arguments]    ${elements}    ${branch_type}    ${vob_tag}
    Uncheckout elements    ${elements}
    Remove a branch type    ${branch_type}    ${vob_tag}

Checkout elements
    [Arguments]    ${list_elements}
    [Documentation]    Keyword to checkout ${list_elements}
    Init Action    ${ACTION_CHECKOUT}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_CHECKOUT_COMMENT}    ${EMPTY}
    Action Set    ${PRT_CHECKOUT_LIST_ELEMENTS}    ${list_elements}
    Action Execute

Add Text
    [Arguments]    ${text_file_name}    ${text_to_add}
    [Documentation]    Keyword to add text ${text_to_add} to file ${text_file_name}
    Init Action    PCK.AUTOMIC_TEXT.PUB.ACTION.ADD_TEXT
    Action Set    &UC4RB_TEXT_FILE_NAME#    ${text_file_name}
    Action Set    &UC4RB_TEXT_ADD_TEXT#    ${text_to_add}
    Action Execute

Checkin elements
    [Arguments]    ${list_elements}
    [Documentation]    Keyword to checkin ${list_elements}
    Init Action    ${ACTION_CHECKIN}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_CHECKIN_LIST_ELEMENTS}    ${list_elements}
    Action Set    ${PRT_CHECKIN_IDENTICAL}    YES
    Action Execute

Start a view
    [Arguments]    ${view}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    startview ${view}
    Action Execute
    Action Report Should Be Found

End a view
    [Arguments]    ${view}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    endview ${view}
    Action Execute
    Action Report Should Be Found

Move element
    [Arguments]    ${pname}    ${target_pname}
    [Documentation]    Keyword to move ${pname} ${target_pname}
    Init Action    ${ACTION_MOVE}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_MOVE_PNAME}    ${pname}
    Action Set    ${PRT_MOVE_TARGET_PNAME}    ${target_pname}
    Action Execute

Remove type
    [Arguments]    ${type}    ${type_value}    ${vob_tag}
    [Documentation]    This key workd used for remove type [attype|brtype|eltype|hltype Hyperlink|lbtype|trtype]
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    rmtype -rmall -force ${type}:${type_value}@${vob_tag}
    Action Execute
    Action Report Should Be Found

Remove attribute
    [Arguments]    ${type_name}    ${element}
    [Documentation]    This key workd used for remove attribute
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    rmattr -nc ${type_name} ${element}
    Action Execute
    Action Report Should Be Found

Remove element
    [Arguments]    ${element}
    [Documentation]    This key workd used for remove element ${element}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    rmelem -nc -force ${element}
    Action Execute
    Action Report Should Be Found

Make a label type
    [Arguments]    ${label_type}    ${vob_tag}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    mklbtype -nc ${label_type}\@${vob_tag}
    Action Execute
    Action Report Should Be Found

Remove a label type
    [Arguments]    ${label_type}    ${vob_tag}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    rmtype -rmall -force lbtype:${label_type}\@${vob_tag}
    Action Execute
    Action Report Should Be Found

Remove a label
    [Arguments]    ${label_type}    ${elements}
    Init Action    ${ACTION_GENERIC_CLEARTOOL}
    Action Set    ${PRT_CLEARTOOL_PATH}    ${_CLEARTOOL_PATH}
    Action Set    ${PRT_GENERIC_CLEARTOOL_OPTIONS}    rmlabel ${label_type} ${elements}
    Action Execute
    Action Report Should Be Found

Remove a label and make label type
    [Arguments]    ${label_type}    ${elements}    ${vob_tag}
    Remove a label    ${label_type}    ${elements}
    Make a label type    ${label_type}    ${vob_tag}